{"version":3,"sources":["scripts/app.js"],"names":["angular","module","constant","X","O","EMPTY","game","local","remote","login","getUser","multiplayer","VictoryModalCtrl","Game","self","this","resolve","winnerTeam","winner","team","$postLink","component","bindings","templateUrl","controller","controllerAs","$inject","multiplayerCtrl","$scope","ApiPath","UserService","$uibModal","PanelService","SocketService","$rootScope","user","$parent","$close","facebook","initSocket","openBoard","open","scope","chooseOpponent","opponent","users","opponentSocketId","getOpponentSocketFromValue","emit","userId","id","name","on","data","$apply","usersOnline","_","map","value","key","text","animation","backdrop","okCb","accepter","getSocketId","challenger","$emit","params","back","cb","loginCtrl","$timeout","TEAMS","ANIMATIONS","goTo","url","a","document","createElement","click","setAttribute","style","display","body","appendChild","console","log","window","location","teams","animations","openPanel","panel","then","resp","err","continueNotLogged","loginWithFacebook","localStorage","getItem","facebookAuth","confirmCtrl","ctrl","modalInstance","dismiss","boardCtrl","close","avatar","img","ChooseTeamModalCtrl","choose","chooseTeam","service","validParams","element","getElementsByClassName","headerCtrl","$compile","$element","handler","forward","triflixBoardCtrl","previous","$onInit","getStatus","index","copy","getOpponent","opponentMove","state","$doCheck","isEqual","makeMove","x","y","flatCoordinate","lockBoard","extend","victoryModal","result","dismissed","restart","error","panelContainerCtrl","$templateCache","$window","initWindow","width","innerWidth","documentElement","clientWidth","height","innerHeight","clientHeight","recalculateSize","panels","forEach","css","length","parent","$on","evt","elem","attr","template","get","append","newScope","$new","prototype","indexOf","splice","$destroy","leftPos","remove","push","homeController","svgIconDirective","svgIconService","ddo","link","attrs","$observe","icon","svg","getIcons","charAt","replaceWith","ICONS","X-icon","O-icon","directive","unwatch","children","removeClass","child","$","find","cell","$watch","newVal","iconEffect","addClass","toLowerCase","fn","modal","res","off","$http","method","TicTacToeWrapper","tictactoe","TicTacToe","TicTacToeBoard","aiPlayer","TicTacToeAIPlayer","aiTeam","oppositePlayer","initialize","move","Error","board","indexes","httpInterceptor","$location","request","config","auth","authHeader","headers","response","setItem","responseError","factory","TABLE_NR","$q","init","i","ticTacToeWrapper","AImove","deferred","defer","reject","promise","multiplayerMove","lastMove","aiMoveRemote","Content-Type","JSON","stringify","eval","g","socket","io","connect","clb","mapObject","socketId","myLastMove","$stateProvider","$urlRouterProvider","$httpProvider","defaults","withCredentials","interceptors","otherwise","run","put"],"mappings":"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","file":"scripts/app-c634765f40.js","sourcesContent":[";(function(){\r\n  'use strict';\r\n\r\n  angular.module('triflix', [\r\n    'ui.router',\r\n    'ui.bootstrap'\r\n  ])\r\n  .constant('TEAMS',{\r\n    X: 'X',\r\n    O: 'O',\r\n    EMPTY: ''\r\n  })\r\n  .constant('ANIMATIONS', {\r\n    X: 'tada',\r\n    O: 'bounceIn'\r\n  })\r\n  .constant('ApiPath', {\r\n    game: {\r\n      local: 'http://127.0.0.1:8080/jerseybackend/rest/game',\r\n      remote: 'https://triflixbackend.herokuapp.com/rest/game'\r\n    },\r\n    login: {\r\n      local: 'http://localhost:3002/auth/facebook',\r\n      remote: 'https://triflixbe.herokuapp.com/auth/facebook'\r\n    },\r\n    getUser: {\r\n      local: 'http://127.0.0.1:3002/user',\r\n      remote: 'https://triflixbe.herokuapp.com/user'\r\n    },\r\n    multiplayer: {\r\n      local: 'http://localhost:3002',\r\n      remote: 'https://triflixbe.herokuapp.com'\r\n    }\r\n  })\r\n  .constant('TABLE_NR', 2);\r\n\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('victoryModal', {\r\n    bindings: {\r\n      resolve: '<'\r\n    },\r\n    templateUrl: 'app/components/panels/victory/victory.html',\r\n    controller: VictoryModalCtrl,\r\n    controllerAs: '$ctrl'\r\n  })\r\n\r\n  VictoryModalCtrl.$inject = ['Game'];\r\n\r\n  function VictoryModalCtrl(Game){\r\n    var self = this;\r\n\r\n    self.game = self.resolve.game;\r\n\r\n    /*if(self.game.winner.team === Game.TEAMS.X)\r\n      self.winnerImg = 'assets/images/x.png';\r\n    else\r\n      self.winnerImg = 'assets/images/o.png';\r\n    */\r\n    self.winnerTeam = self.game.winner.team;\r\n\r\n    self.$postLink = function(){\r\n\r\n    }\r\n\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('multiplayer', {\r\n    bindings: {\r\n    },\r\n    templateUrl: 'app/components/panels/multiplayer/multiplayer.html',\r\n    controller: multiplayerCtrl,\r\n    controllerAs: 'multiplayer'\r\n  });\r\n\r\n  multiplayerCtrl.$inject = ['$scope', 'ApiPath', 'UserService', '$uibModal', 'PanelService'\r\n  , 'SocketService', '$rootScope', 'PanelService'];\r\n\r\n  function multiplayerCtrl($scope, ApiPath, UserService, $uibModal, PanelService,\r\n    SocketService, $rootScope, PanelService){\r\n\r\n    var user = UserService.getUser();\r\n    if(!user) return $scope.$parent.$close(); //display you have to login to use this feature\r\n    if(!user.facebook) return $scope.$parent.$close();\r\n    //gestire timeout per connessione assente\r\n\r\n    var self = this;\r\n    SocketService.initSocket();\r\n\r\n    var openBoard = function(){\r\n      PanelService.open({\r\n        component: 'board',\r\n        scope: $scope\r\n      });\r\n    }\r\n\r\n    self.chooseOpponent = function(opponent){\r\n      if(self.users){\r\n        var opponentSocketId = SocketService.getOpponentSocketFromValue(opponent, self.users);\r\n        SocketService.emit('choose opponent', opponentSocketId);\r\n      }\r\n    }\r\n\r\n    SocketService.emit('add to room', {\r\n      userId: user.facebook.id,\r\n      name: user.facebook.name\r\n    });\r\n\r\n\r\n    SocketService.on('add to room', function(data){\r\n      $scope.$apply(function(){\r\n        self.users = data.users;\r\n        self.usersOnline = _.map(data.users, function(value, key){\r\n          return value;\r\n        })\r\n      })\r\n    });\r\n\r\n    SocketService.on('challenge request', function(opponent){\r\n      var text = 'Challenge request from '+ opponent.opponent.name;\r\n      $uibModal.open({\r\n        animation: true,\r\n        component: 'confirm',\r\n        backdrop: 'static',\r\n        resolve: {\r\n          text: [function(){\r\n            return text;\r\n          }],\r\n          okCb: [function(){\r\n            return function(){\r\n              SocketService.emit('challenge accepted', {\r\n                accepter: SocketService.getSocketId(),\r\n                challenger: opponent.opponentSocketId\r\n              })\r\n              SocketService.chooseOpponent(opponent);\r\n              $rootScope.$emit('triflix.game.start');\r\n              openBoard();\r\n            }\r\n          }]\r\n        }\r\n      });\r\n    });\r\n\r\n    SocketService.on('challenge accepted', function(opponent){\r\n      SocketService.chooseOpponent(opponent);\r\n      $rootScope.$emit('triflix.game.start');\r\n      openBoard();\r\n    })\r\n\r\n    this.params = {\r\n      back: {\r\n        text: 'Back',\r\n        cb: function(){\r\n          $scope.$parent.$close();\r\n        }\r\n      }\r\n    };\r\n\r\n\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('login', {\r\n    bindings: {\r\n    },\r\n    templateUrl: 'app/components/panels/login/login.html',\r\n    controller: loginCtrl,\r\n    controllerAs: 'login'\r\n  });\r\n\r\n  loginCtrl.$inject = ['$scope', 'UserService', '$timeout', 'PanelService', 'TEAMS',\r\n  'ANIMATIONS', 'ApiPath'];\r\n\r\n  function loginCtrl($scope, UserService, $timeout, PanelService, TEAMS, ANIMATIONS,\r\n  ApiPath){\r\n    this.teams = TEAMS;\r\n    this.animations = ANIMATIONS;\r\n    var openPanel= function(panel){\r\n      PanelService.open({\r\n        component: panel,\r\n        scope: $scope\r\n      });\r\n    }\r\n\r\n    var getUser = function(panel){\r\n      UserService.user()\r\n      .then(function(resp){\r\n        this.user = resp.data;\r\n        if(panel)\r\n          $timeout(function(){\r\n            openPanel(panel);\r\n          }, 100);\r\n      }, function(err){\r\n        console.log(err);\r\n      })\r\n    }\r\n    getUser();\r\n    this.continueNotLogged = function(){\r\n      openPanel('board');\r\n    }\r\n\r\n    this.loginWithFacebook = function(){\r\n      if(window.localStorage.getItem('x-auth'))\r\n        getUser('multiplayer');\r\n      else\r\n        facebookAuth();\r\n    }\r\n\r\n    var facebookAuth = function(){\r\n      goTo(ApiPath.login.remote);\r\n    }\r\n\r\n    /*workaround per fare settare al browser l'header referer fondamentale al login\r\n    a node per fare il redirect corretto. con window.location non viene settato l'header*/\r\n    function goTo(url){\r\n      var a = document.createElement(\"a\");\r\n      if(!a.click) //for IE\r\n      {\r\n           window.location = url;\r\n           return;\r\n      }\r\n      a.setAttribute(\"href\", url);\r\n      a.style.display = \"none\";\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      console.log('click created');\r\n    }\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('confirm', {\r\n    bindings: {\r\n      resolve: '<',\r\n      modalInstance: '<'\r\n    },\r\n    templateUrl: 'app/components/panels/confirm/confirm.html',\r\n    controller: confirmCtrl,\r\n    controllerAs: 'confirm'\r\n  });\r\n\r\n  confirmCtrl.$inject = ['$scope', 'UserService'];\r\n\r\n  function confirmCtrl($scope, UserService){\r\n    var ctrl = this;\r\n    var okCb = ctrl.resolve.okCb;\r\n    ctrl.resolve.okCb = function(){\r\n      ctrl.modalInstance.dismiss('cancel');\r\n      okCb();\r\n    }\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('board', {\r\n    bindings: {\r\n    },\r\n    templateUrl: 'app/components/panels/board/board.html',\r\n    controller: boardCtrl,\r\n    controllerAs: 'board'\r\n  });\r\n\r\n  boardCtrl.$inject = ['PanelService', '$scope', '$timeout', 'UserService'];\r\n\r\n  function boardCtrl(PanelService, $scope, $timeout, UserService){\r\n\r\n    var user = UserService.getUser();\r\n    var open = function(){\r\n      PanelService.open({\r\n        component: 'multiplayer',\r\n        scope: $scope\r\n      });\r\n\r\n    }\r\n    var close = function(){\r\n      $scope.$parent.$close();\r\n    }\r\n\r\n    this.params = {\r\n      back: {\r\n        text: 'Back',\r\n        cb: close\r\n      },\r\n      avatar: {\r\n        url: user ?  (user.facebook.img || '') : ''\r\n      }\r\n    }\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('chooseTeamModal', {\r\n    bindings: {\r\n      modalInstance: '<',\r\n      resolve: '<'\r\n    },\r\n    templateUrl: 'app/components/panels/choose-team/choose-team.html',\r\n    controller: ChooseTeamModalCtrl,\r\n    controllerAs: 'chooseTeam'\r\n  })\r\n\r\n  ChooseTeamModalCtrl.$inject = ['Game', 'TEAMS'];\r\n\r\n  function ChooseTeamModalCtrl(Game, TEAMS){\r\n    var self = this;\r\n    //self.images = Game.IMAGES;\r\n\r\n    self.teams = TEAMS;\r\n    self.choose = function(team){\r\n      Game.chooseTeam(team);\r\n      self.modalInstance.close(team);\r\n    }\r\n\r\n    self.$postLink = function(){\r\n\r\n    }\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .service('PanelService', ['$rootScope',\r\n  function($rootScope){\r\n\r\n    var panel = angular.element(document.getElementsByClassName(\"triflix-panel\")[0]);;\r\n\r\n\r\n    var validParams = function(params){\r\n      if(!params) return false;\r\n      return true;\r\n    }\r\n    this.open = function(params, scope){\r\n      if(!validParams(params)) return;\r\n\r\n      $rootScope.$emit('triflix.addpanel', params);\r\n\r\n\r\n    }\r\n\r\n\r\n  }])\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('triflixHeader', {\r\n    bindings: {\r\n      params: '<'\r\n    },\r\n    templateUrl: 'app/components/triflix-header/triflix-header.html',\r\n    controller: headerCtrl,\r\n    controllerAs: 'header'\r\n  });\r\n\r\n  headerCtrl.$inject = ['$compile', '$scope', '$element'];\r\n  var main = '<div class=\"col-xs-12\"></div>';\r\n  var back = '<div class=\"col-xs-3\"></div>';\r\n  var forward = '<div class=\"col-xs-3 col-xs-offset-6\"></div>';\r\n  var avatar;\r\n\r\n  function headerCtrl($compile, $scope, $element){\r\n\r\n    this.handler = {\r\n      back: this.params.back && this.params.back.cb || function(){},\r\n      forward: this.params.forward && this.params.forward.cb || function(){}\r\n    };\r\n    //this.avatar = this.params.avatar.url || 'assets/images/fb-profile.gif';\r\n    this.avatar = this.params.avatar && this.params.avatar.url;\r\n\r\n    /*this.$postLink = function(){\r\n      var mainEl = angular.element(main);\r\n      if(this.params.avatar){\r\n        back = forward = avatar = '<div class=\"col-xs-4\"></div>';\r\n      }\r\n\r\n      if(this.params.back){\r\n        var backEl = angular.element(back);\r\n        var btn = angular.element('<div class=\"btn btn-warning col-xs-6\"></div>');\r\n        btn.attr('ng-click', 'header.params.back.cb()');\r\n        btn.html(this.params.back.text);\r\n        backEl.append(btn);\r\n        mainEl.append(backEl);\r\n      }\r\n      if(this.params.avatar){\r\n        var avatarEl = angular.element(avatar);\r\n        avatarEl.addClass('text-center');\r\n        var img = angular.element('<img class=\"img-rounded\" width=64 height=32 />');\r\n        img.attr('src', this.params.avatar.url);\r\n        avatarEl.append(img);\r\n        //avatarEl.html(this.params.avatar.url);\r\n        mainEl.append(avatarEl);\r\n      }\r\n      if(this.params.forward){\r\n        var forwardEl = angular.element(forward);\r\n        var btn = angular.element('<div class=\"btn btn-warning col-xs-6 pull-right\"></div>');\r\n        btn.attr('ng-click', 'header.params.forward.cb()');\r\n        btn.html(this.params.forward.text);\r\n        forwardEl.append(btn);\r\n        mainEl.append(forwardEl);\r\n      }\r\n\r\n      $element.append($compile(mainEl)($scope));\r\n\r\n\r\n    }*/\r\n\r\n  }\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('triflixBoard', {\r\n    bindings: {\r\n      index: '@'\r\n    },\r\n    templateUrl: 'app/components/triflix-board/triflix-board.html',\r\n    controller: triflixBoardCtrl,\r\n    controllerAs: 'board'\r\n  });\r\n\r\n  triflixBoardCtrl.$inject = ['$element', '$compile', '$scope', 'Game',\r\n  '$rootScope', '$uibModal', 'TEAMS', 'SocketService'];\r\n\r\n  function triflixBoardCtrl($element, $compile, $scope, Game, $rootScope, $uibModal,\r\n    TEAMS, SocketService){\r\n    var game, previous, self = this;\r\n\r\n    this.$onInit = function(){\r\n      game = Game.getStatus()[this.index];\r\n      this.game = game;\r\n      previous = angular.copy(game);\r\n      if(SocketService.getOpponent()){\r\n        SocketService.on('make move', function(opponentMove){\r\n          $scope.$apply(function(){\r\n            game.state[opponentMove] = game.team === TEAMS.X ? TEAMS.O : TEAMS.X;\r\n          })\r\n        });\r\n      }\r\n    }\r\n    this.$doCheck = function(){\r\n      if(!_.isEqual(game.state, previous.state)){\r\n\r\n      }\r\n    }\r\n\r\n    this.makeMove = function(x, y){\r\n      var flatCoordinate = Game.flatCoordinate(x, y);\r\n      if(Game.lockBoard){\r\n        return;\r\n      }\r\n      if(game.state[flatCoordinate] === TEAMS.EMPTY){\r\n        game.state[flatCoordinate] = game.team;\r\n        Game.opponentMove(game, flatCoordinate)\r\n        .then(function(resp){\r\n          _.extend(game, resp.data);\r\n          if(game.winner.team){\r\n            $rootScope.$emit('triflix.game.victory');\r\n            var victoryModal = $uibModal.open({\r\n              animation: true,\r\n              component: 'victoryModal',\r\n              resolve: {\r\n                game: [function(){\r\n                  return self.game;\r\n                }]\r\n              }\r\n            })\r\n            victoryModal.result.catch(function(dismissed){\r\n              Game.restart();\r\n              $rootScope.$emit('triflix.game.start');\r\n            })\r\n          }\r\n\r\n        })\r\n        .catch(function(error){\r\n          console.log(error);\r\n        })\r\n      }\r\n    }\r\n\r\n\r\n    this.$postLink = function(){}\r\n\r\n\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .component('panelContainer', {\r\n    bindings: {\r\n    },\r\n    controller: panelContainerCtrl,\r\n    controllerAs: 'panel'\r\n  });\r\n\r\n  panelContainerCtrl.$inject = ['$element', '$scope', '$rootScope', '$templateCache', '$compile',\r\n   '$window', '$timeout'];\r\n\r\n  function panelContainerCtrl($element, $scope, $rootScope, $templateCache, $compile,\r\n    $window, $timeout){\r\n\r\n\r\n      var width, height, leftPos;\r\n\r\n      function initWindow(){\r\n        width = window.innerWidth\r\n        || document.documentElement.clientWidth\r\n        || document.body.clientWidth;\r\n\r\n        height = window.innerHeight\r\n        || document.documentElement.clientHeight\r\n        || document.body.clientHeight;\r\n      }\r\n      initWindow();\r\n\r\n      this.$onInit = function(){\r\n        $element.css('position', 'absolute');\r\n        $element.css('width', width);\r\n        $element.css('height', height);\r\n        $element.css('top', '0px');\r\n        $element.css('left', -width + 'px');\r\n      }\r\n\r\n      var panels = [];\r\n      $rootScope.$on('triflix.addpanel', function(evt, params){\r\n        var elem = angular.element('<div></div>');\r\n        elem.css('float', 'left');\r\n        elem.css('width', width);\r\n        elem.css('height', height);\r\n\r\n        if(params.controller ){\r\n          var ctrl = angular.element('<div></div>');\r\n          ctrl.attr('ng-controller', params.controller);\r\n          var template = $templateCache.get(params.templateUrl);\r\n          ctrl.append(angular.element(template));\r\n          elem.append(ctrl);\r\n        }\r\n        else if(params.component){\r\n          var component = '<' + params.component + '></' + params.component + '>';\r\n          elem.append(component);\r\n        }\r\n\r\n        var newScope = $rootScope.$new();\r\n        newScope.prototype = params.scope;\r\n        newScope.$close = function(){\r\n          var index = panels.indexOf(panel);\r\n\r\n          panels.splice(index, 1);\r\n          panel.scope().$destroy();\r\n\r\n\r\n          var leftPos = panels.length ? -width * (panels.length - 1) : 0;\r\n          /*$element.animate({\r\n            left: leftPos\r\n          }, 1000, function(){\r\n            $timeout(function(){\r\n              panel.remove();\r\n              $element.css('width', width * panels.length);\r\n            }, 3000);\r\n          });*/\r\n          $element.css('left', leftPos);\r\n          $timeout(function(){\r\n            panel.remove();\r\n            $element.css('width', width * panels.length);\r\n          }, 1000);\r\n\r\n        }\r\n        var panel = $compile(elem)(newScope);\r\n        panels.push(panel);\r\n\r\n        $element.parent().css('position', 'relative');\r\n        $element.parent().css('overflow-x', 'hidden');\r\n        $element.parent().css('width', width);\r\n        $element.parent().css('height', height);\r\n\r\n        $element.css('width', width * panels.length);\r\n        $element.append(panel);\r\n        var leftPos = -width * (panels.length - 1);\r\n        /*$element.animate({\r\n          left: leftPos\r\n        }, 1000);*/\r\n        $element.css('left', leftPos);\r\n\r\n      });\r\n\r\n      this.$postLink = function(){\r\n        angular.element($window).on('resize', recalculateSize);\r\n      }\r\n\r\n      function recalculateSize(){\r\n        initWindow();\r\n        panels.forEach(function(panel){\r\n          panel.css('height', height);\r\n          panel.css('width', width);\r\n        })\r\n\r\n        $element.css('height', height);\r\n        $element.css('width', width * panels.length);\r\n        $element.css('left', (- width * (panels.length - 1)));\r\n        $element.parent().css('height', height);\r\n        $element.parent().css('width', width);\r\n      }\r\n  }\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n\r\n  angular.module('triflix')\r\n  .controller('HomeController', homeController);\r\n\r\n  homeController.$inject = ['$scope', 'PanelService', '$timeout'];\r\n\r\n  function homeController($scope, PanelService, $timeout){\r\n    $timeout(function(){\r\n      PanelService.open({\r\n        component: 'login',\r\n        scope: $scope\r\n      });\r\n    })\r\n\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .directive('svgIcon', svgIconDirective)\r\n  .service('svgIconService', svgIconService);\r\n\r\n  svgIconDirective.$inject = ['svgIconService', 'ANIMATIONS'];\r\n  svgIconService.$inject = [];\r\n\r\n\r\n  function svgIconDirective(svgIconService, ANIMATIONS){\r\n    var ddo = {\r\n      link: function(scope, elem, attrs){\r\n        attrs.$observe('svgIcon', function(icon){\r\n          var svg = svgIconService.getIcons()[icon];\r\n          if(svg){\r\n            svg = angular.element(svg);\r\n            svg.css('width', attrs.width ? attrs.width + 'px' : '64px');\r\n            var animation = ANIMATIONS[icon.charAt(0)];\r\n            svg.attr('class','animated '+animation);\r\n            elem.replaceWith(svg);\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return ddo;\r\n  }\r\n\r\n  function svgIconService(){\r\n    var ICONS = {\r\n      'X-icon': \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><polygon fill='#DB9E36' fill-rule='nonzero' points='100 11.5399943 88.4595969 0 50.0001022 38.4599035 11.5404031 0 0 11.5399943 38.4596991 50.0001022 0 88.4595969 11.5406074 100 50.0001022 61.5403009 88.4595969 100 99.9997956 88.4595969 61.5403009 50.0001022'></polygon></svg>\",\r\n      'O-icon': \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle stroke='#DC3522' stroke-width='14' fill='transparent' cx='50' cy='50' r='43' /></svg>\"\r\n    }\r\n    this.getIcons = function(){\r\n      return ICONS;\r\n    }\r\n  }\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .directive('refreshBoard', ['$rootScope', function($rootScope){\r\n    var ddo = {\r\n      link: function(scope, elem, attrs){\r\n        /*remove all the classes and icons from the board everytime you start the game*/\r\n\r\n        var unwatch = $rootScope.$on('triflix.game.start', function(){\r\n          elem.children().removeClass('board__cell--selected board__cell--o board__cell--x');\r\n          angular.forEach(elem.children(), function(child){\r\n            $(child).find('.icon').remove();\r\n          })\r\n        })\r\n\r\n        scope.$on('$destroy', function(){\r\n          unwatch();\r\n        })\r\n      }\r\n    }\r\n    return ddo;\r\n  }])\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .directive('paintCell', ['Game', '$compile', 'ANIMATIONS',\r\n    function(Game, $compile, ANIMATIONS){\r\n    /*paint a single cell on the board*/\r\n    var ddo = {\r\n      scope: {\r\n        cell: '=paintCell',\r\n        game: '='\r\n      },\r\n      link: function(scope, elem, attrs){\r\n        var icon = angular.element('<span class=\"icon animated {{iconEffect}}\"></span>');\r\n\r\n        scope.$watch('cell', function(newVal){\r\n          if(!newVal) return;\r\n          scope.iconEffect = ANIMATIONS[scope.cell] || 'bounceIn';\r\n          elem.removeClass('board__cell--x board__cell--o');\r\n          elem.addClass('board__cell--selected board__cell--'+scope.cell.toLowerCase());\r\n          elem.append($compile(icon)(scope));\r\n\r\n        })\r\n\r\n\r\n      }\r\n    }\r\n    return ddo;\r\n  }])\r\n\r\n\r\n\r\n  /*.component('paintCell', {\r\n    bindings: {\r\n      cell: '<',\r\n      game: '<'\r\n    },\r\n    controller: paintCellCtrl,\r\n    controllerAs: 'paint'\r\n  });\r\n\r\n  paintCellCtrl.$inject = ['$element', '$compile', 'Game', '$rootScope', '$timeout', '$scope'];\r\n\r\n  function paintCellCtrl($element, $compile, Game, $rootScope, $timeout, $scope){\r\n\r\n    var previousVal = this.cell;\r\n    var self = this;\r\n    self.$doCheck = function(){\r\n      if(this.cell !== previousVal){\r\n        if(this.cell === Game.TEAMS.X){\r\n          $element.css('background-image', 'url('+Game.IMAGES.X+')');\r\n        } else if(this.cell === Game.TEAMS.O){\r\n          $element.css('background-image', 'url('+Game.IMAGES.O+')');\r\n        } else if(this.cell === Game.TEAMS.EMPTY){\r\n          $element.css('background-image', 'none');\r\n        }\r\n        previousVal = this.cell;\r\n      }\r\n    }\r\n\r\n    $rootScope.$on('triflix.game.victory', function(evt, data){\r\n      $timeout(function(){\r\n        $element.removeClass('animated pulse');\r\n      }, 100)\r\n      $timeout(function(){\r\n        $element.addClass('animated pulse');\r\n      },200)\r\n\r\n    })\r\n\r\n\r\n    self.$postLink = function(){\r\n\r\n      var overlayHtml =\r\n      '<div class=\"paintCell--overlay\">'+\r\n        '<div style=\"text-align: center; position: relative; width: 100%; height: 100%;\">'+\r\n          '<img class=\"paintCell--overlay--team\" alt=\"no image\" ng-src=\"{{paint.imgPath}}\"/>'+\r\n        '</div>'+\r\n      '</div>';\r\n\r\n      var overlayEl = angular.element(overlayHtml);\r\n\r\n      $element.on('mouseenter', function(){\r\n        if(!Game.lockBoard && self.cell === Game.TEAMS.EMPTY){\r\n          self.imgPath = Game.IMAGES[self.game.team];\r\n          $element.append($compile(overlayEl)($scope));\r\n        }\r\n      })\r\n\r\n      $element.on('mouseleave', function(){\r\n        if(!Game.lockBoard){\r\n          overlayEl.remove();\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n  }*/\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .directive('lockBoard', ['$uibModal', 'Game', '$rootScope', function($uibModal, Game, $rootScope){\r\n\r\n    /*Lock the board until you choose a team through the ChooseTeam modal component*/\r\n\r\n    var ddo = {\r\n      link: function(scope, elem, attrs){\r\n        elem.on('click', fn);\r\n        function fn(evt){\r\n          var modal = $uibModal.open({\r\n            animation: true,\r\n            component: 'chooseTeamModal',\r\n            backdrop: 'static',\r\n            resolve: {}\r\n          });\r\n          modal.result.then(function(res){\r\n            elem.off('click', fn);\r\n            Game.lockBoard = false; //unlock board\r\n            $rootScope.$emit('triflix.game.start');\r\n          })\r\n          .catch(function(res){\r\n\r\n          })\r\n        }\r\n\r\n      }\r\n\r\n\r\n    }\r\n    return ddo;\r\n  }])\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .service('UserService', UserService);\r\n\r\n  UserService.$inject = ['$http', 'ApiPath'];\r\n\r\n  function UserService($http, ApiPath){\r\n\r\n    var user;\r\n\r\n    this.getUser = function(){\r\n      return user;\r\n    }\r\n\r\n\r\n    this.user = function(){\r\n      return $http({\r\n        method: 'GET',\r\n        url: ApiPath.getUser.remote,\r\n      }).then(function(resp){\r\n        if(!resp.data.error)\r\n          user = resp.data;\r\n        return resp;\r\n      }, function(err){\r\n        return err;\r\n      });\r\n    };\r\n  }\r\n})();\r\n\n;(function(){\r\n\r\n  function TicTacToeWrapper(){}\r\n\r\n  TicTacToeWrapper.prototype.makeMove = function(game){\r\n    var tictactoe = new TicTacToe.TicTacToeBoard(game.state);\r\n    var aiPlayer = new TicTacToe.TicTacToeAIPlayer();\r\n    var aiTeam = tictactoe.oppositePlayer(game.team);\r\n    aiPlayer.initialize(aiTeam, tictactoe);\r\n    var move = aiPlayer.makeMove();\r\n    if(move != null){\r\n      tictactoe.makeMove(aiTeam, move);\r\n    } else {\r\n      throw new Error('invalid move');\r\n    }\r\n    var winner = tictactoe.winner();\r\n    return {\r\n      data: {\r\n        team: game.team,\r\n        state: tictactoe.board,\r\n        winner: {\r\n          team: winner ? winner.cell : '',\r\n          indexes: winner ? winner.indexes : []\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  window.TicTacToeWrapper = TicTacToeWrapper;\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n    .factory('httpInterceptor', httpInterceptor);\r\n\r\n    httpInterceptor.$inject = ['$location'];\r\n    var authHeader = 'x-auth';\r\n    function httpInterceptor($location){\r\n      return {\r\n        request: function(config){\r\n          var auth = window.localStorage.getItem(authHeader);\r\n          if(auth)\r\n            config.headers[authHeader] = auth;\r\n          return config;\r\n        },\r\n        response: function(response){\r\n          var auth = response.headers()[authHeader];\r\n          if(auth)\r\n            window.localStorage.setItem(authHeader, auth);\r\n          return response;\r\n        },\r\n        responseError: function(response){\r\n          return response;\r\n        }\r\n      }\r\n    }\r\n\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .service('Game', Game);\r\n\r\n  Game.$inject = ['$http', 'TEAMS', 'TABLE_NR', '$timeout', 'ApiPath', '$q', 'SocketService'];\r\n\r\n  function Game($http, TEAMS, TABLE_NR, $timeout, ApiPath, $q, SocketService){\r\n\r\n    var ticTacToeWrapper = new TicTacToeWrapper(); //wrapper for tictactoeAI.js\r\n    var game = [];\r\n\r\n    function init(){\r\n      for(var i = 0; i < TABLE_NR; i++){\r\n        game[i] = {};\r\n        game[i].team = TEAMS.X; //default team\r\n        game[i].state = ['','','','','','','','',''];\r\n        game[i].winner = {};\r\n      }\r\n    }\r\n    init();\r\n\r\n    this.lockBoard = true;\r\n\r\n    this.getStatus = function(){\r\n      return game;\r\n    }\r\n\r\n\r\n    var AImove = function(game){\r\n      var deferred = $q.defer();\r\n      $timeout(function(){\r\n        try{\r\n          var result = ticTacToeWrapper.makeMove(game);\r\n          deferred.resolve(result);\r\n        }\r\n        catch(error){\r\n          deferred.reject(error);\r\n        }\r\n      })\r\n      return deferred.promise;\r\n    }\r\n\r\n    var multiplayerMove = function(game, lastMove){\r\n      return SocketService.makeMove(game, lastMove);\r\n    }\r\n    this.opponentMove = function(game, lastMove){\r\n      if(SocketService.getOpponent()){\r\n        return multiplayerMove(game, lastMove);\r\n      } else{\r\n        return AImove(game);\r\n      }\r\n\r\n    }\r\n\r\n    /*unused*/\r\n    this.aiMoveRemote = function(){\r\n      return $http({\r\n        url: ApiPath.game.remote,\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json' //request\r\n        },\r\n        data: JSON.stringify(eval(game))\r\n      });\r\n    }\r\n    this.restart = function(){\r\n      game.forEach(function(g){\r\n        g.state = ['','','','','','','','',''];\r\n        g.winner = {};\r\n      })\r\n\r\n    }\r\n\r\n    this.chooseTeam = function(team){\r\n      game.forEach(function(g){\r\n        g.team = team;\r\n      })\r\n    }\r\n\r\n    this.flatCoordinate = function(x, y){\r\n      return x + (y * 3);\r\n    }\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .service('SocketService', SocketService);\r\n\r\n  SocketService.$inject = ['ApiPath', '$timeout', '$q', 'TEAMS', '$rootScope'];\r\n\r\n  function SocketService(ApiPath, $timeout, $q, TEAMS, $rootScope){\r\n\r\n    var socket, opponent;\r\n    this.initSocket = function(){\r\n      if(!window.io)\r\n        return console.log('socket.io not loaded');\r\n      if(!socket){\r\n        socket = io.connect(ApiPath.multiplayer.remote);\r\n        this.on('disconnect', function(){\r\n          socket = null;\r\n        })\r\n      }\r\n    }\r\n    this.emit = function(evt, data){\r\n      socket.emit(evt, data);\r\n    }\r\n    this.on = function(evt, clb){\r\n      socket.on(evt, clb);\r\n    }\r\n    this.getSocketId = function(){\r\n        return socket.id;\r\n    }\r\n    this.chooseOpponent = function(challenger){\r\n      opponent = challenger;\r\n    }\r\n\r\n    this.getOpponentSocketFromValue = function(opponent, users){\r\n      var opponentSocketId = -1;\r\n      _.mapObject(users, function(user, socketId){\r\n        if(user.userId === opponent.userId)\r\n          opponentSocketId = socketId;\r\n      });\r\n      return opponentSocketId;\r\n    }\r\n\r\n    this.getOpponent = function(){\r\n      return opponent;\r\n    }\r\n\r\n    this.makeMove = function(game, myLastMove){\r\n      var deferred = $q.defer();\r\n      socket.emit('make move', {move: myLastMove, opponent: opponent});\r\n      deferred.resolve({data: game});\r\n      /*socket.on('make move', function(opponentMove){\r\n        $rootScope.$apply(function(){\r\n          game.state[opponentMove] = game.team === TEAMS.X ? TEAMS.O : TEAMS.X;\r\n          deferred.resolve({data: game});\r\n        })\r\n      })*/\r\n      return deferred.promise;\r\n    }\r\n\r\n\r\n  }\r\n})();\r\n\n;(function(){\r\n  angular.module('triflix')\r\n  .config(config);\r\n\r\n  config.$inject = ['$stateProvider', '$urlRouterProvider', '$httpProvider'];\r\n  function config($stateProvider, $urlRouterProvider, $httpProvider){\r\n    $httpProvider.defaults.withCredentials = true;\r\n    $httpProvider.interceptors.push('httpInterceptor');\r\n\r\n    $stateProvider\r\n      .state('home', {\r\n        url: '/',\r\n        templateUrl: 'app/home/home.html',\r\n        controller: 'HomeController as homeCtrl'\r\n      });\r\n\r\n    $urlRouterProvider.otherwise('/');\r\n  }\r\n})();\r\n\nangular.module(\"triflix\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/home/home.html\",\"<div class=panelParent><panel-container class=panel-container></panel-container></div><!--\\r\\n\\r\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"display: none\\\">\\r\\n\\r\\n  <symbol id=\\\"o\\\" viewBox=\\\"0 0 100 100\\\">\\r\\n    <circle cx=\\\"50\\\" cy=\\\"50\\\" r=\\\"43\\\" />\\r\\n  </symbol>\\r\\n\\r\\n  <symbol id=\\\"x\\\" viewbox=\\\"0 0 100 100\\\">\\r\\n    <polygon fill-rule=\\\"nonzero\\\" points=\\\"100 11.5399943 88.4595969 0 50.0001022 38.4599035 11.5404031 0 0 11.5399943 38.4596991 50.0001022 0 88.4595969 11.5406074 100 50.0001022 61.5403009 88.4595969 100 99.9997956 88.4595969 61.5403009 50.0001022\\\"></polygon>\\r\\n  </symbol>\\r\\n\\r\\n</svg>\\r\\n\\r\\n-->\");\n$templateCache.put(\"app/components/triflix-board/triflix-board.html\",\"<div class=col-sm-12><div class=header><h1>TicTacToe</h1><p>Cras ultricies ligula sed magna dictum porta.</p></div></div><div lock-board><div class=board refresh-board><div ng-click=board.makeMove(0,0) paint-cell=board.game.state[0] game=board.game class=\\\"board__cell board__cell--selected board__cell--o\\\"><span class=\\\"icon animated bounceIn\\\"></span></div><div ng-click=board.makeMove(0,1) paint-cell=board.game.state[3] game=board.game class=board__cell></div><div ng-click=board.makeMove(0,2) paint-cell=board.game.state[6] game=board.game class=\\\"board__cell board__cell--selected board__cell--x\\\"><span class=\\\"icon animated tada\\\"></span></div><div ng-click=board.makeMove(1,0) paint-cell=board.game.state[1] game=board.game class=board__cell></div><div ng-click=board.makeMove(1,1) paint-cell=board.game.state[4] game=board.game class=board__cell></div><div ng-click=board.makeMove(1,2) paint-cell=board.game.state[7] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,0) paint-cell=board.game.state[2] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,1) paint-cell=board.game.state[5] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,2) paint-cell=board.game.state[8] game=board.game class=board__cell></div></div></div>\");\n$templateCache.put(\"app/components/triflix-header/triflix-header.html\",\"<div class=\\\"col-sm-12 triflix-header\\\"><div class=\\\"col-xs-4 triflix-header--button\\\" ng-click=header.handler.back() ng-show=header.params.back><i class=\\\"fa fa-arrow-left\\\" aria-hidden=true></i> <span>Back</span></div><div class=\\\"col-xs-4 text-center\\\"><img ng-show=header.avatar ng-src={{header.avatar}} width=32 height=24 class=img-circle alt=\\\"no img\\\"></div><div class=\\\"col-xs-4 triflix-header--button\\\" ng-click=header.handler.forward() ng-show=header.params.forward><div class=pull-right><i class=\\\"fa fa-arrow-right\\\" aria-hidden=true></i> <span>Forward</span></div></div></div>\");\n$templateCache.put(\"app/components/panels/confirm/confirm.html\",\"<div class=\\\"triflix-modal row\\\"><div class=\\\"triflix-modal--header col-sm-12\\\"><h3 class=triflix-modal--header--title>Heading</h3></div><div class=\\\"triflix-modal--body col-sm-12\\\"><h2>{{confirm.resolve.text}}</h2><button class=\\\"col-sm-3 col-sm-offset-3 btn btn-success\\\" ng-click=confirm.resolve.okCb()>Ok</button> <button class=\\\"col-sm-3 btn btn-danger\\\" ng-click=\\\"\\\">Cancel</button></div></div>\");\n$templateCache.put(\"app/components/panels/choose-team/choose-team.html\",\"<div class=triflix-modal><div class=triflix-modal--header><h3 class=triflix-modal--title>Choose a team</h3></div><div class=triflix-modal--body><div ng-repeat=\\\"team in chooseTeam.teams\\\" ng-click=chooseTeam.choose(team)><span svg-icon={{team}}-icon width=64></span></div></div></div>\");\n$templateCache.put(\"app/components/panels/board/board.html\",\"<triflix-header params=board.params ng-if=board.params></triflix-header><triflix-board class=col-sm-12 index=0></triflix-board>\");\n$templateCache.put(\"app/components/panels/multiplayer/multiplayer.html\",\"<triflix-header params=multiplayer.params></triflix-header><div class=\\\"row multiplayer\\\"><div class=col-sm-12><h1>Multiplayer</h1></div><div class=\\\"col-sm-12 multiplayer--box\\\"><div ng-repeat=\\\"user in multiplayer.usersOnline track by $index\\\" ng-click=multiplayer.chooseOpponent(user) class=\\\"col-sm-4 col-sm-offset-4 multiplayer--box--el\\\">{{user.name}}</div></div></div>\");\n$templateCache.put(\"app/components/panels/login/login.html\",\"<div class=login><div class=row><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center\\\"><div ng-repeat=\\\"team in login.teams\\\" style=\\\"display: inline\\\"><span svg-icon={{team}}-icon width=64></span></div></div></div><div class=row style=\\\"margin-top: 30px\\\" ng-click=login.continueNotLogged()><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--local\\\">Local game</div></div><div class=\\\"row login--button\\\"><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--facebook\\\" ng-click=login.loginWithFacebook()>Multiplayer game with <a class=\\\"btn btn-social-icon btn-facebook\\\" style=\\\"height: 32px\\\"><span class=\\\"fa fa-facebook\\\"></span></a></div></div><div class=\\\"row login--button\\\"><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--realtime\\\">realtime game</div></div></div><!--\\r\\nhttp://localhost:3002/auth/facebook\\r\\nhttps://triflixbe.herokuapp.com/auth/facebook\\r\\n-->\");\n$templateCache.put(\"app/components/panels/victory/victory.html\",\"<div class=triflix-modal><div class=triflix-modal--header><h3 class=triflix-modal--title>We have a winner</h3></div><div class=triflix-modal--body>Player <span svg-icon={{$ctrl.winnerTeam}}-icon width=32></span> win the game</div></div><!--<div class=\\\"modal-header\\\">\\r\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">I\\'m a modal!</h3>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\r\\n    <ul>\\r\\n        <li ng-repeat=\\\"item in $ctrl.items\\\">\\r\\n            <a href=\\\"#\\\" ng-click=\\\"$event.preventDefault(); $ctrl.selected.item = item\\\">{{ item }}</a>\\r\\n        </li>\\r\\n    </ul>\\r\\n    Selected: <b>{{ $ctrl.selected.item }}</b>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.ok()\\\">OK</button>\\r\\n    <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.cancel()\\\">Cancel</button>\\r\\n</div>-->\");}]);"],"sourceRoot":"/source/"}