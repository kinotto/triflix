{"version":3,"sources":["scripts/app.js"],"names":["angular","module","constant","X","O","EMPTY","game","local","remote","login","getUser","multiplayer","VictoryModalCtrl","Game","self","this","resolve","winnerTeam","winner","team","$postLink","component","bindings","templateUrl","controller","controllerAs","$inject","multiplayerCtrl","$scope","ApiPath","UserService","$uibModal","PanelService","SocketService","$rootScope","user","initSocket","openBoard","open","scope","chooseOpponent","opponent","users","opponentSocketId","getOpponentSocketFromValue","emit","userId","facebook","id","name","on","data","$apply","usersOnline","_","map","value","key","text","animation","backdrop","okCb","accepter","getSocketId","challenger","$emit","params","back","cb","$parent","$close","loginCtrl","$timeout","TEAMS","ANIMATIONS","teams","animations","openPanel","panel","then","err","console","log","continueNotLogged","loginWithFacebook","window","location","href","confirmCtrl","ctrl","modalInstance","dismiss","ChooseTeamModalCtrl","choose","chooseTeam","close","boardCtrl","avatar","url","img","service","validParams","element","document","getElementsByClassName","headerCtrl","$compile","$element","handler","forward","triflixBoardCtrl","previous","$onInit","getStatus","index","copy","getOpponent","opponentMove","state","$doCheck","isEqual","makeMove","x","y","flatCoordinate","lockBoard","resp","extend","victoryModal","result","dismissed","restart","error","$http","method","TicTacToeWrapper","prototype","tictactoe","TicTacToe","TicTacToeBoard","aiPlayer","TicTacToeAIPlayer","aiTeam","oppositePlayer","initialize","move","Error","board","cell","indexes","httpInterceptor","$location","request","config","headers","protocol","host","response","responseError","factory","TABLE_NR","$q","init","i","ticTacToeWrapper","AImove","deferred","defer","reject","promise","multiplayerMove","lastMove","aiMoveRemote","Content-Type","JSON","stringify","eval","forEach","g","socket","io","connect","evt","clb","mapObject","socketId","myLastMove","panelContainerCtrl","$templateCache","$window","initWindow","width","innerWidth","documentElement","clientWidth","body","height","innerHeight","clientHeight","recalculateSize","panels","css","length","parent","$on","elem","attr","template","get","append","newScope","$new","indexOf","splice","$destroy","leftPos","remove","push","homeController","svgIconDirective","svgIconService","ddo","link","attrs","$observe","icon","svg","getIcons","charAt","replaceWith","ICONS","X-icon","O-icon","directive","unwatch","children","removeClass","child","$","find","$watch","newVal","iconEffect","addClass","toLowerCase","fn","modal","res","off","$stateProvider","$urlRouterProvider","$httpProvider","defaults","withCredentials","interceptors","otherwise","run","put"],"mappings":"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","file":"scripts/app-b0508707d1.js","sourcesContent":[";(function(){\n  'use strict';\n\n  angular.module('triflix', [\n    'ui.router',\n    'ui.bootstrap'\n  ])\n  .constant('TEAMS',{\n    X: 'X',\n    O: 'O',\n    EMPTY: ''\n  })\n  .constant('ANIMATIONS', {\n    X: 'tada',\n    O: 'bounceIn'\n  })\n  .constant('ApiPath', {\n    game: {\n      local: 'http://127.0.0.1:8080/jerseybackend/rest/game',\n      remote: 'https://triflixbackend.herokuapp.com/rest/game'\n    },\n    login: {\n      local: 'http://localhost:3002/auth/facebook',\n      remote: 'https://triflixbe.herokuapp.com/auth/facebook'\n    },\n    getUser: {\n      local: 'http://127.0.0.1:3002/user',\n      remote: 'https://triflixbe.herokuapp.com/user'\n    },\n    multiplayer: {\n      local: 'http://localhost:3002',\n      remote: 'https://triflixbe.herokuapp.com'\n    }\n  })\n  .constant('TABLE_NR', 2);\n\n\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('victoryModal', {\n    bindings: {\n      resolve: '<'\n    },\n    templateUrl: 'app/components/panels/victory/victory.html',\n    controller: VictoryModalCtrl,\n    controllerAs: '$ctrl'\n  })\n\n  VictoryModalCtrl.$inject = ['Game'];\n\n  function VictoryModalCtrl(Game){\n    var self = this;\n\n    self.game = self.resolve.game;\n\n    /*if(self.game.winner.team === Game.TEAMS.X)\n      self.winnerImg = 'assets/images/x.png';\n    else\n      self.winnerImg = 'assets/images/o.png';\n    */\n    self.winnerTeam = self.game.winner.team;\n\n    self.$postLink = function(){\n\n    }\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('multiplayer', {\n    bindings: {\n    },\n    templateUrl: 'app/components/panels/multiplayer/multiplayer.html',\n    controller: multiplayerCtrl,\n    controllerAs: 'multiplayer'\n  });\n\n  multiplayerCtrl.$inject = ['$scope', 'ApiPath', 'UserService', '$uibModal', 'PanelService'\n  , 'SocketService', '$rootScope', 'PanelService'];\n\n  function multiplayerCtrl($scope, ApiPath, UserService, $uibModal, PanelService,\n    SocketService, $rootScope, PanelService){\n\n    var user = UserService.getUser();\n    if(!user) return; //display you have to login to use this feature\n    //gestire timeout per connessione assente\n\n    var self = this;\n    SocketService.initSocket();\n\n    var openBoard = function(){\n      PanelService.open({\n        component: 'board',\n        scope: $scope\n      });\n    }\n\n    self.chooseOpponent = function(opponent){\n      if(self.users){\n        var opponentSocketId = SocketService.getOpponentSocketFromValue(opponent, self.users);\n        SocketService.emit('choose opponent', opponentSocketId);\n      }\n    }\n\n    SocketService.emit('add to room', {\n      userId: user.facebook.id,\n      name: user.facebook.name\n    });\n\n\n    SocketService.on('add to room', function(data){\n      $scope.$apply(function(){\n        self.users = data.users;\n        self.usersOnline = _.map(data.users, function(value, key){\n          return value;\n        })\n      })\n    });\n\n    SocketService.on('challenge request', function(opponent){\n      var text = 'Challenge request from '+ opponent.opponent.name;\n      $uibModal.open({\n        animation: true,\n        component: 'confirm',\n        backdrop: 'static',\n        resolve: {\n          text: [function(){\n            return text;\n          }],\n          okCb: [function(){\n            return function(){\n              SocketService.emit('challenge accepted', {\n                accepter: SocketService.getSocketId(),\n                challenger: opponent.opponentSocketId\n              })\n              SocketService.chooseOpponent(opponent);\n              $rootScope.$emit('triflix.game.start');\n              openBoard();\n            }\n          }]\n        }\n      });\n    });\n\n    SocketService.on('challenge accepted', function(opponent){\n      SocketService.chooseOpponent(opponent);\n      $rootScope.$emit('triflix.game.start');\n      openBoard();\n    })\n\n    this.params = {\n      back: {\n        text: 'Back',\n        cb: function(){\n          $scope.$parent.$close();\n        }\n      }\n    };\n\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('login', {\n    bindings: {\n    },\n    templateUrl: 'app/components/panels/login/login.html',\n    controller: loginCtrl,\n    controllerAs: 'login'\n  });\n\n  loginCtrl.$inject = ['$scope', 'UserService', '$timeout', 'PanelService', 'TEAMS',\n  'ANIMATIONS', 'ApiPath'];\n\n  function loginCtrl($scope, UserService, $timeout, PanelService, TEAMS, ANIMATIONS,\n  ApiPath){\n    this.teams = TEAMS;\n    this.animations = ANIMATIONS;\n    var openPanel= function(panel){\n      PanelService.open({\n        component: panel,\n        scope: $scope\n      });\n    }\n\n    this.getUser = function(){\n      UserService.user()\n      .then(function(user){\n        this.user = user;\n        $timeout(function(){\n          openPanel('multiplayer');\n        }, 500);\n      }, function(err){\n        console.log(err);\n      })\n    }(); //immediatly invoked\n\n    this.continueNotLogged = function(){\n      openPanel('board');\n    }\n\n    this.loginWithFacebook = function(){\n      window.location.href = ApiPath.login.local;\n    }\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('confirm', {\n    bindings: {\n      resolve: '<',\n      modalInstance: '<'\n    },\n    templateUrl: 'app/components/panels/confirm/confirm.html',\n    controller: confirmCtrl,\n    controllerAs: 'confirm'\n  });\n\n  confirmCtrl.$inject = ['$scope', 'UserService'];\n\n  function confirmCtrl($scope, UserService){\n    var ctrl = this;\n    var okCb = ctrl.resolve.okCb;\n    ctrl.resolve.okCb = function(){\n      ctrl.modalInstance.dismiss('cancel');\n      okCb();\n    }\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('chooseTeamModal', {\n    bindings: {\n      modalInstance: '<',\n      resolve: '<'\n    },\n    templateUrl: 'app/components/panels/choose-team/choose-team.html',\n    controller: ChooseTeamModalCtrl,\n    controllerAs: 'chooseTeam'\n  })\n\n  ChooseTeamModalCtrl.$inject = ['Game', 'TEAMS'];\n\n  function ChooseTeamModalCtrl(Game, TEAMS){\n    var self = this;\n    //self.images = Game.IMAGES;\n\n    self.teams = TEAMS;\n    self.choose = function(team){\n      Game.chooseTeam(team);\n      self.modalInstance.close(team);\n    }\n\n    self.$postLink = function(){\n\n    }\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('board', {\n    bindings: {\n    },\n    templateUrl: 'app/components/panels/board/board.html',\n    controller: boardCtrl,\n    controllerAs: 'board'\n  });\n\n  boardCtrl.$inject = ['PanelService', '$scope', '$timeout', 'UserService'];\n\n  function boardCtrl(PanelService, $scope, $timeout, UserService){\n\n    var user = UserService.getUser();\n    var open = function(){\n      PanelService.open({\n        component: 'multiplayer',\n        scope: $scope\n      });\n\n    }\n    var close = function(){\n      $scope.$parent.$close();\n    }\n\n    this.params = {\n      back: {\n        text: 'Back',\n        cb: close\n      },\n      avatar: {\n        url: user ?  (user.facebook.img || '') : ''\n      }\n    }\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .service('PanelService', ['$rootScope',\n  function($rootScope){\n\n    var panel = angular.element(document.getElementsByClassName(\"triflix-panel\")[0]);;\n\n\n    var validParams = function(params){\n      if(!params) return false;\n      return true;\n    }\n    this.open = function(params, scope){\n      if(!validParams(params)) return;\n\n      $rootScope.$emit('triflix.addpanel', params);\n\n\n    }\n\n\n  }])\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('triflixHeader', {\n    bindings: {\n      params: '<'\n    },\n    templateUrl: 'app/components/triflix-header/triflix-header.html',\n    controller: headerCtrl,\n    controllerAs: 'header'\n  });\n\n  headerCtrl.$inject = ['$compile', '$scope', '$element'];\n  var main = '<div class=\"col-xs-12\"></div>';\n  var back = '<div class=\"col-xs-3\"></div>';\n  var forward = '<div class=\"col-xs-3 col-xs-offset-6\"></div>';\n  var avatar;\n\n  function headerCtrl($compile, $scope, $element){\n\n    this.handler = {\n      back: this.params.back && this.params.back.cb || function(){},\n      forward: this.params.forward && this.params.forward.cb || function(){}\n    };\n    //this.avatar = this.params.avatar.url || 'assets/images/fb-profile.gif';\n    this.avatar = this.params.avatar && this.params.avatar.url;\n\n    /*this.$postLink = function(){\n      var mainEl = angular.element(main);\n      if(this.params.avatar){\n        back = forward = avatar = '<div class=\"col-xs-4\"></div>';\n      }\n\n      if(this.params.back){\n        var backEl = angular.element(back);\n        var btn = angular.element('<div class=\"btn btn-warning col-xs-6\"></div>');\n        btn.attr('ng-click', 'header.params.back.cb()');\n        btn.html(this.params.back.text);\n        backEl.append(btn);\n        mainEl.append(backEl);\n      }\n      if(this.params.avatar){\n        var avatarEl = angular.element(avatar);\n        avatarEl.addClass('text-center');\n        var img = angular.element('<img class=\"img-rounded\" width=64 height=32 />');\n        img.attr('src', this.params.avatar.url);\n        avatarEl.append(img);\n        //avatarEl.html(this.params.avatar.url);\n        mainEl.append(avatarEl);\n      }\n      if(this.params.forward){\n        var forwardEl = angular.element(forward);\n        var btn = angular.element('<div class=\"btn btn-warning col-xs-6 pull-right\"></div>');\n        btn.attr('ng-click', 'header.params.forward.cb()');\n        btn.html(this.params.forward.text);\n        forwardEl.append(btn);\n        mainEl.append(forwardEl);\n      }\n\n      $element.append($compile(mainEl)($scope));\n\n\n    }*/\n\n  }\n\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('triflixBoard', {\n    bindings: {\n      index: '@'\n    },\n    templateUrl: 'app/components/triflix-board/triflix-board.html',\n    controller: triflixBoardCtrl,\n    controllerAs: 'board'\n  });\n\n  triflixBoardCtrl.$inject = ['$element', '$compile', '$scope', 'Game',\n  '$rootScope', '$uibModal', 'TEAMS', 'SocketService'];\n\n  function triflixBoardCtrl($element, $compile, $scope, Game, $rootScope, $uibModal,\n    TEAMS, SocketService){\n    var game, previous, self = this;\n\n    this.$onInit = function(){\n      game = Game.getStatus()[this.index];\n      this.game = game;\n      previous = angular.copy(game);\n      if(SocketService.getOpponent()){\n        SocketService.on('make move', function(opponentMove){\n          $scope.$apply(function(){\n            game.state[opponentMove] = game.team === TEAMS.X ? TEAMS.O : TEAMS.X;\n          })\n        });\n      }\n    }\n    this.$doCheck = function(){\n      if(!_.isEqual(game.state, previous.state)){\n\n      }\n    }\n\n    this.makeMove = function(x, y){\n      var flatCoordinate = Game.flatCoordinate(x, y);\n      if(Game.lockBoard){\n        return;\n      }\n      if(game.state[flatCoordinate] === TEAMS.EMPTY){\n        game.state[flatCoordinate] = game.team;\n        Game.opponentMove(game, flatCoordinate)\n        .then(function(resp){\n          _.extend(game, resp.data);\n          if(game.winner.team){\n            $rootScope.$emit('triflix.game.victory');\n            var victoryModal = $uibModal.open({\n              animation: true,\n              component: 'victoryModal',\n              resolve: {\n                game: [function(){\n                  return self.game;\n                }]\n              }\n            })\n            victoryModal.result.catch(function(dismissed){\n              Game.restart();\n              $rootScope.$emit('triflix.game.start');\n            })\n          }\n\n        })\n        .catch(function(error){\n          console.log(error);\n        })\n      }\n    }\n\n\n    this.$postLink = function(){}\n\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .service('UserService', UserService);\n\n  UserService.$inject = ['$http', 'ApiPath'];\n\n  function UserService($http, ApiPath){\n\n    var user;\n\n    this.getUser = function(){\n      return user;\n    }\n\n\n    this.user = function(){\n      return $http({\n        method: 'GET',\n        url: ApiPath.getUser.remote,\n      }).then(function(resp){\n        user = resp.data || {};\n        return user;\n      });\n    };\n  }\n})();\n\n;(function(){\n\n  function TicTacToeWrapper(){}\n\n  TicTacToeWrapper.prototype.makeMove = function(game){\n    var tictactoe = new TicTacToe.TicTacToeBoard(game.state);\n    var aiPlayer = new TicTacToe.TicTacToeAIPlayer();\n    var aiTeam = tictactoe.oppositePlayer(game.team);\n    aiPlayer.initialize(aiTeam, tictactoe);\n    var move = aiPlayer.makeMove();\n    if(move != null){\n      tictactoe.makeMove(aiTeam, move);\n    } else {\n      throw new Error('invalid move');\n    }\n    var winner = tictactoe.winner();\n    return {\n      data: {\n        team: game.team,\n        state: tictactoe.board,\n        winner: {\n          team: winner ? winner.cell : '',\n          indexes: winner ? winner.indexes : []\n        }\n      }\n    }\n  }\n\n  window.TicTacToeWrapper = TicTacToeWrapper;\n\n})();\n\n;(function(){\n  angular.module('triflix')\n    .factory('httpInterceptor', httpInterceptor);\n\n    httpInterceptor.$inject = ['$location'];\n\n    function httpInterceptor($location){\n      return {\n        request: function(config){\n          config.headers['referer'] = $location.protocol() + '://' + $location.host();\n          return config;\n        },\n        response: function(response){\n          return response;\n        },\n        responseError: function(response){\n          return response;\n        }\n      }\n    }\n\n})();\n\n;(function(){\n  angular.module('triflix')\n  .service('Game', Game);\n\n  Game.$inject = ['$http', 'TEAMS', 'TABLE_NR', '$timeout', 'ApiPath', '$q', 'SocketService'];\n\n  function Game($http, TEAMS, TABLE_NR, $timeout, ApiPath, $q, SocketService){\n\n    var ticTacToeWrapper = new TicTacToeWrapper(); //wrapper for tictactoeAI.js\n    var game = [];\n\n    function init(){\n      for(var i = 0; i < TABLE_NR; i++){\n        game[i] = {};\n        game[i].team = TEAMS.X; //default team\n        game[i].state = ['','','','','','','','',''];\n        game[i].winner = {};\n      }\n    }\n    init();\n\n    this.lockBoard = true;\n\n    this.getStatus = function(){\n      return game;\n    }\n\n\n    var AImove = function(game){\n      var deferred = $q.defer();\n      $timeout(function(){\n        try{\n          var result = ticTacToeWrapper.makeMove(game);\n          deferred.resolve(result);\n        }\n        catch(error){\n          deferred.reject(error);\n        }\n      })\n      return deferred.promise;\n    }\n\n    var multiplayerMove = function(game, lastMove){\n      return SocketService.makeMove(game, lastMove);\n    }\n    this.opponentMove = function(game, lastMove){\n      if(SocketService.getOpponent()){\n        return multiplayerMove(game, lastMove);\n      } else{\n        return AImove(game);\n      }\n\n    }\n\n    /*unused*/\n    this.aiMoveRemote = function(){\n      return $http({\n        url: ApiPath.game.remote,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json' //request\n        },\n        data: JSON.stringify(eval(game))\n      });\n    }\n    this.restart = function(){\n      game.forEach(function(g){\n        g.state = ['','','','','','','','',''];\n        g.winner = {};\n      })\n\n    }\n\n    this.chooseTeam = function(team){\n      game.forEach(function(g){\n        g.team = team;\n      })\n    }\n\n    this.flatCoordinate = function(x, y){\n      return x + (y * 3);\n    }\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .service('SocketService', SocketService);\n\n  SocketService.$inject = ['ApiPath', '$timeout', '$q', 'TEAMS', '$rootScope'];\n\n  function SocketService(ApiPath, $timeout, $q, TEAMS, $rootScope){\n\n    var socket, opponent;\n    this.initSocket = function(){\n      if(!window.io)\n        return console.log('socket.io not loaded');\n      if(!socket){\n        socket = io.connect(ApiPath.multiplayer.remote);\n        this.on('disconnect', function(){\n          socket = null;\n        })\n      }\n    }\n    this.emit = function(evt, data){\n      socket.emit(evt, data);\n    }\n    this.on = function(evt, clb){\n      socket.on(evt, clb);\n    }\n    this.getSocketId = function(){\n        return socket.id;\n    }\n    this.chooseOpponent = function(challenger){\n      opponent = challenger;\n    }\n\n    this.getOpponentSocketFromValue = function(opponent, users){\n      var opponentSocketId = -1;\n      _.mapObject(users, function(user, socketId){\n        if(user.userId === opponent.userId)\n          opponentSocketId = socketId;\n      });\n      return opponentSocketId;\n    }\n\n    this.getOpponent = function(){\n      return opponent;\n    }\n\n    this.makeMove = function(game, myLastMove){\n      var deferred = $q.defer();\n      socket.emit('make move', {move: myLastMove, opponent: opponent});\n      deferred.resolve({data: game});\n      /*socket.on('make move', function(opponentMove){\n        $rootScope.$apply(function(){\n          game.state[opponentMove] = game.team === TEAMS.X ? TEAMS.O : TEAMS.X;\n          deferred.resolve({data: game});\n        })\n      })*/\n      return deferred.promise;\n    }\n\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .component('panelContainer', {\n    bindings: {\n    },\n    controller: panelContainerCtrl,\n    controllerAs: 'panel'\n  });\n\n  panelContainerCtrl.$inject = ['$element', '$scope', '$rootScope', '$templateCache', '$compile',\n   '$window', '$timeout'];\n\n  function panelContainerCtrl($element, $scope, $rootScope, $templateCache, $compile,\n    $window, $timeout){\n\n\n      var width, height, leftPos;\n\n      function initWindow(){\n        width = window.innerWidth\n        || document.documentElement.clientWidth\n        || document.body.clientWidth;\n\n        height = window.innerHeight\n        || document.documentElement.clientHeight\n        || document.body.clientHeight;\n      }\n      initWindow();\n\n      this.$onInit = function(){\n        $element.css('position', 'absolute');\n        $element.css('width', width);\n        $element.css('height', height);\n        $element.css('top', '0px');\n        $element.css('left', -width + 'px');\n      }\n\n      var panels = [];\n      $rootScope.$on('triflix.addpanel', function(evt, params){\n        var elem = angular.element('<div></div>');\n        elem.css('float', 'left');\n        elem.css('width', width);\n        elem.css('height', height);\n\n        if(params.controller ){\n          var ctrl = angular.element('<div></div>');\n          ctrl.attr('ng-controller', params.controller);\n          var template = $templateCache.get(params.templateUrl);\n          ctrl.append(angular.element(template));\n          elem.append(ctrl);\n        }\n        else if(params.component){\n          var component = '<' + params.component + '></' + params.component + '>';\n          elem.append(component);\n        }\n\n        var newScope = $rootScope.$new();\n        newScope.prototype = params.scope;\n        newScope.$close = function(){\n          var index = panels.indexOf(panel);\n\n          panels.splice(index, 1);\n          panel.scope().$destroy();\n\n\n          var leftPos = panels.length ? -width * (panels.length - 1) : 0;\n          /*$element.animate({\n            left: leftPos\n          }, 1000, function(){\n            $timeout(function(){\n              panel.remove();\n              $element.css('width', width * panels.length);\n            }, 3000);\n          });*/\n          $element.css('left', leftPos);\n          $timeout(function(){\n            panel.remove();\n            $element.css('width', width * panels.length);\n          }, 1000);\n\n        }\n        var panel = $compile(elem)(newScope);\n        panels.push(panel);\n\n        $element.parent().css('position', 'relative');\n        $element.parent().css('overflow-x', 'hidden');\n        $element.parent().css('width', width);\n        $element.parent().css('height', height);\n\n        $element.css('width', width * panels.length);\n        $element.append(panel);\n        var leftPos = -width * (panels.length - 1);\n        /*$element.animate({\n          left: leftPos\n        }, 1000);*/\n        $element.css('left', leftPos);\n\n      });\n\n      this.$postLink = function(){\n        angular.element($window).on('resize', recalculateSize);\n      }\n\n      function recalculateSize(){\n        initWindow();\n        panels.forEach(function(panel){\n          panel.css('height', height);\n          panel.css('width', width);\n        })\n\n        $element.css('height', height);\n        $element.css('width', width * panels.length);\n        $element.css('left', (- width * (panels.length - 1)));\n        $element.parent().css('height', height);\n        $element.parent().css('width', width);\n      }\n  }\n})();\n\n(function(){\n  'use strict';\n\n  angular.module('triflix')\n  .controller('HomeController', homeController);\n\n  homeController.$inject = ['$scope', 'PanelService', '$timeout'];\n\n  function homeController($scope, PanelService, $timeout){\n    $timeout(function(){\n      PanelService.open({\n        component: 'login',\n        scope: $scope\n      });\n    })\n\n  }\n})();\n\n;(function(){\n  angular.module('triflix')\n  .directive('svgIcon', svgIconDirective)\n  .service('svgIconService', svgIconService);\n\n  svgIconDirective.$inject = ['svgIconService', 'ANIMATIONS'];\n  svgIconService.$inject = [];\n\n\n  function svgIconDirective(svgIconService, ANIMATIONS){\n    var ddo = {\n      link: function(scope, elem, attrs){\n        attrs.$observe('svgIcon', function(icon){\n          var svg = svgIconService.getIcons()[icon];\n          if(svg){\n            svg = angular.element(svg);\n            svg.css('width', attrs.width ? attrs.width + 'px' : '64px');\n            var animation = ANIMATIONS[icon.charAt(0)];\n            svg.attr('class','animated '+animation);\n            elem.replaceWith(svg);\n          }\n        })\n      }\n    }\n    return ddo;\n  }\n\n  function svgIconService(){\n    var ICONS = {\n      'X-icon': \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><polygon fill='#DB9E36' fill-rule='nonzero' points='100 11.5399943 88.4595969 0 50.0001022 38.4599035 11.5404031 0 0 11.5399943 38.4596991 50.0001022 0 88.4595969 11.5406074 100 50.0001022 61.5403009 88.4595969 100 99.9997956 88.4595969 61.5403009 50.0001022'></polygon></svg>\",\n      'O-icon': \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle stroke='#DC3522' stroke-width='14' fill='transparent' cx='50' cy='50' r='43' /></svg>\"\n    }\n    this.getIcons = function(){\n      return ICONS;\n    }\n  }\n\n})();\n\n;(function(){\n  angular.module('triflix')\n  .directive('refreshBoard', ['$rootScope', function($rootScope){\n    var ddo = {\n      link: function(scope, elem, attrs){\n        /*remove all the classes and icons from the board everytime you start the game*/\n\n        var unwatch = $rootScope.$on('triflix.game.start', function(){\n          elem.children().removeClass('board__cell--selected board__cell--o board__cell--x');\n          angular.forEach(elem.children(), function(child){\n            $(child).find('.icon').remove();\n          })\n        })\n\n        scope.$on('$destroy', function(){\n          unwatch();\n        })\n      }\n    }\n    return ddo;\n  }])\n})();\n\n;(function(){\n  angular.module('triflix')\n  .directive('paintCell', ['Game', '$compile', 'ANIMATIONS',\n    function(Game, $compile, ANIMATIONS){\n    /*paint a single cell on the board*/\n    var ddo = {\n      scope: {\n        cell: '=paintCell',\n        game: '='\n      },\n      link: function(scope, elem, attrs){\n        var icon = angular.element('<span class=\"icon animated {{iconEffect}}\"></span>');\n\n        scope.$watch('cell', function(newVal){\n          if(!newVal) return;\n          scope.iconEffect = ANIMATIONS[scope.cell] || 'bounceIn';\n          elem.removeClass('board__cell--x board__cell--o');\n          elem.addClass('board__cell--selected board__cell--'+scope.cell.toLowerCase());\n          elem.append($compile(icon)(scope));\n\n        })\n\n\n      }\n    }\n    return ddo;\n  }])\n\n\n\n  /*.component('paintCell', {\n    bindings: {\n      cell: '<',\n      game: '<'\n    },\n    controller: paintCellCtrl,\n    controllerAs: 'paint'\n  });\n\n  paintCellCtrl.$inject = ['$element', '$compile', 'Game', '$rootScope', '$timeout', '$scope'];\n\n  function paintCellCtrl($element, $compile, Game, $rootScope, $timeout, $scope){\n\n    var previousVal = this.cell;\n    var self = this;\n    self.$doCheck = function(){\n      if(this.cell !== previousVal){\n        if(this.cell === Game.TEAMS.X){\n          $element.css('background-image', 'url('+Game.IMAGES.X+')');\n        } else if(this.cell === Game.TEAMS.O){\n          $element.css('background-image', 'url('+Game.IMAGES.O+')');\n        } else if(this.cell === Game.TEAMS.EMPTY){\n          $element.css('background-image', 'none');\n        }\n        previousVal = this.cell;\n      }\n    }\n\n    $rootScope.$on('triflix.game.victory', function(evt, data){\n      $timeout(function(){\n        $element.removeClass('animated pulse');\n      }, 100)\n      $timeout(function(){\n        $element.addClass('animated pulse');\n      },200)\n\n    })\n\n\n    self.$postLink = function(){\n\n      var overlayHtml =\n      '<div class=\"paintCell--overlay\">'+\n        '<div style=\"text-align: center; position: relative; width: 100%; height: 100%;\">'+\n          '<img class=\"paintCell--overlay--team\" alt=\"no image\" ng-src=\"{{paint.imgPath}}\"/>'+\n        '</div>'+\n      '</div>';\n\n      var overlayEl = angular.element(overlayHtml);\n\n      $element.on('mouseenter', function(){\n        if(!Game.lockBoard && self.cell === Game.TEAMS.EMPTY){\n          self.imgPath = Game.IMAGES[self.game.team];\n          $element.append($compile(overlayEl)($scope));\n        }\n      })\n\n      $element.on('mouseleave', function(){\n        if(!Game.lockBoard){\n          overlayEl.remove();\n        }\n      })\n\n    }\n\n  }*/\n})();\n\n;(function(){\n  angular.module('triflix')\n  .directive('lockBoard', ['$uibModal', 'Game', '$rootScope', function($uibModal, Game, $rootScope){\n\n    /*Lock the board until you choose a team through the ChooseTeam modal component*/\n\n    var ddo = {\n      link: function(scope, elem, attrs){\n        elem.on('click', fn);\n        function fn(evt){\n          var modal = $uibModal.open({\n            animation: true,\n            component: 'chooseTeamModal',\n            backdrop: 'static',\n            resolve: {}\n          });\n          modal.result.then(function(res){\n            elem.off('click', fn);\n            Game.lockBoard = false; //unlock board\n            $rootScope.$emit('triflix.game.start');\n          })\n          .catch(function(res){\n\n          })\n        }\n\n      }\n\n\n    }\n    return ddo;\n  }])\n\n})();\n\n;(function(){\n  angular.module('triflix')\n  .config(config);\n\n  config.$inject = ['$stateProvider', '$urlRouterProvider', '$httpProvider'];\n  function config($stateProvider, $urlRouterProvider, $httpProvider){\n    $httpProvider.defaults.withCredentials = true;\n    $httpProvider.interceptors.push('httpInterceptor');\n    //$httpProvider.defaults.headers.get.Cookies = $cookies;\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/home/home.html',\n        controller: 'HomeController as homeCtrl'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n})();\n\nangular.module(\"triflix\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/home/home.html\",\"<div class=panelParent><panel-container class=panel-container></panel-container></div><!--\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"display: none\\\">\\n\\n  <symbol id=\\\"o\\\" viewBox=\\\"0 0 100 100\\\">\\n    <circle cx=\\\"50\\\" cy=\\\"50\\\" r=\\\"43\\\" />\\n  </symbol>\\n\\n  <symbol id=\\\"x\\\" viewbox=\\\"0 0 100 100\\\">\\n    <polygon fill-rule=\\\"nonzero\\\" points=\\\"100 11.5399943 88.4595969 0 50.0001022 38.4599035 11.5404031 0 0 11.5399943 38.4596991 50.0001022 0 88.4595969 11.5406074 100 50.0001022 61.5403009 88.4595969 100 99.9997956 88.4595969 61.5403009 50.0001022\\\"></polygon>\\n  </symbol>\\n\\n</svg>\\n\\n-->\");\n$templateCache.put(\"app/components/triflix-board/triflix-board.html\",\"<div class=col-sm-12><div class=header><h1>TicTacToe</h1><p>Cras ultricies ligula sed magna dictum porta.</p></div></div><div lock-board><div class=board refresh-board><div ng-click=board.makeMove(0,0) paint-cell=board.game.state[0] game=board.game class=\\\"board__cell board__cell--selected board__cell--o\\\"><span class=\\\"icon animated bounceIn\\\"></span></div><div ng-click=board.makeMove(0,1) paint-cell=board.game.state[3] game=board.game class=board__cell></div><div ng-click=board.makeMove(0,2) paint-cell=board.game.state[6] game=board.game class=\\\"board__cell board__cell--selected board__cell--x\\\"><span class=\\\"icon animated tada\\\"></span></div><div ng-click=board.makeMove(1,0) paint-cell=board.game.state[1] game=board.game class=board__cell></div><div ng-click=board.makeMove(1,1) paint-cell=board.game.state[4] game=board.game class=board__cell></div><div ng-click=board.makeMove(1,2) paint-cell=board.game.state[7] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,0) paint-cell=board.game.state[2] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,1) paint-cell=board.game.state[5] game=board.game class=board__cell></div><div ng-click=board.makeMove(2,2) paint-cell=board.game.state[8] game=board.game class=board__cell></div></div></div>\");\n$templateCache.put(\"app/components/triflix-header/triflix-header.html\",\"<div class=\\\"col-sm-12 triflix-header\\\"><div class=col-xs-4 ng-click=header.handler.back() ng-show=header.params.back><i class=\\\"fa fa-arrow-left\\\" aria-hidden=true></i> <span>Back</span></div><div class=\\\"col-xs-4 text-center\\\"><img ng-show=header.avatar ng-src={{header.avatar}} width=32 height=24 class=img-circle alt=\\\"no img\\\"></div><div class=col-xs-4 ng-click=header.handler.forward() ng-show=header.params.forward><div class=pull-right><i class=\\\"fa fa-arrow-right\\\" aria-hidden=true></i> <span>Forward</span></div></div></div>\");\n$templateCache.put(\"app/components/panels/board/board.html\",\"<triflix-header params=board.params ng-if=board.params></triflix-header><triflix-board class=col-sm-12 index=0></triflix-board>\");\n$templateCache.put(\"app/components/panels/choose-team/choose-team.html\",\"<div class=triflix-modal><div class=triflix-modal--header><h3 class=triflix-modal--title>Choose a team</h3></div><div class=triflix-modal--body><div ng-repeat=\\\"team in chooseTeam.teams\\\" ng-click=chooseTeam.choose(team)><span svg-icon={{team}}-icon width=64></span></div></div></div>\");\n$templateCache.put(\"app/components/panels/confirm/confirm.html\",\"<div class=\\\"triflix-modal row\\\"><div class=\\\"triflix-modal--header col-sm-12\\\"><h3 class=triflix-modal--header--title>Heading</h3></div><div class=\\\"triflix-modal--body col-sm-12\\\"><h2>{{confirm.resolve.text}}</h2><button class=\\\"col-sm-3 col-sm-offset-3 btn btn-success\\\" ng-click=confirm.resolve.okCb()>Ok</button> <button class=\\\"col-sm-3 btn btn-danger\\\" ng-click=\\\"\\\">Cancel</button></div></div>\");\n$templateCache.put(\"app/components/panels/login/login.html\",\"<div class=login><div class=row><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center\\\"><div ng-repeat=\\\"team in login.teams\\\" style=\\\"display: inline\\\"><span svg-icon={{team}}-icon width=64></span></div></div></div><div class=row style=\\\"margin-top: 30px\\\" ng-click=login.continueNotLogged()><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--local\\\">Local game</div></div><div class=\\\"row login--button\\\"><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--facebook\\\" ng-click=login.loginWithFacebook()>Multiplayer game with <a class=\\\"btn btn-social-icon btn-facebook\\\" style=\\\"height: 32px\\\"><span class=\\\"fa fa-facebook\\\"></span></a></div></div><div class=\\\"row login--button\\\"><div class=\\\"col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-4 text-center login--button login--button--realtime\\\">realtime game</div></div></div><!--\\nhttp://localhost:3002/auth/facebook\\nhttps://triflixbe.herokuapp.com/auth/facebook\\n-->\");\n$templateCache.put(\"app/components/panels/multiplayer/multiplayer.html\",\"<triflix-header params=multiplayer.params></triflix-header><div class=\\\"row multiplayer\\\"><div class=col-sm-12><h1>Multiplayer</h1></div><div class=\\\"col-sm-12 multiplayer--box\\\"><div ng-repeat=\\\"user in multiplayer.usersOnline track by $index\\\" ng-click=multiplayer.chooseOpponent(user) class=\\\"col-sm-4 col-sm-offset-4 multiplayer--box--el\\\">{{user.name}}</div></div></div>\");\n$templateCache.put(\"app/components/panels/victory/victory.html\",\"<div class=triflix-modal><div class=triflix-modal--header><h3 class=triflix-modal--title>We have a winner</h3></div><div class=triflix-modal--body>Player <span svg-icon={{$ctrl.winnerTeam}}-icon width=32></span> win the game</div></div><!--<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">I\\'m a modal!</h3>\\n</div>\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\n    <ul>\\n        <li ng-repeat=\\\"item in $ctrl.items\\\">\\n            <a href=\\\"#\\\" ng-click=\\\"$event.preventDefault(); $ctrl.selected.item = item\\\">{{ item }}</a>\\n        </li>\\n    </ul>\\n    Selected: <b>{{ $ctrl.selected.item }}</b>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.ok()\\\">OK</button>\\n    <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.cancel()\\\">Cancel</button>\\n</div>-->\");}]);"],"sourceRoot":"/source/"}